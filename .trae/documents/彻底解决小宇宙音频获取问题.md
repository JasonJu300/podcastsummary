## 方案：直接在 Cloudflare Worker 中调用小宇宙 API

无需额外部署 Go 服务，直接在现有的 Worker 中添加小宇宙 API 调用功能。

### 实现思路

根据研究，小宇宙的 API 大致如下：
1. **获取 Episode 详情**：`GET https://www.xiaoyuzhoufm.com/api/episode/{episodeId}`
2. **音频链接**：从 API 响应中提取 `mediaUrl` 或 `audio` 字段
3. **需要 Headers**：模拟小宇宙 App 的请求头

### 具体实施步骤

1. **修改 parser.ts**：
   - 添加对小宇宙 API 的直接调用
   - 使用正确的 User-Agent 和 Headers
   - 解析 API 响应获取音频链接

2. **添加错误重试机制**：
   - 如果 API 调用失败，尝试备用方案
   - 添加延时重试逻辑

3. **添加 Cookie/Token 支持（可选）**：
   - 如果 API 需要登录态，添加配置选项

### 代码修改内容

我将修改 `worker/src/utils/parser.ts`：

```typescript
// 添加小宇宙 API 调用
async function fetchFromXiaoyuzhouAPI(episodeId: string): Promise<PodcastInfo | null> {
  try {
    const apiUrl = `https://www.xiaoyuzhoufm.com/api/episode/${episodeId}`;
    const response = await fetch(apiUrl, {
      headers: {
        'User-Agent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X)',
        'Accept': 'application/json',
        'Referer': 'https://www.xiaoyuzhoufm.com/',
      },
    });
    
    if (!response.ok) return null;
    
    const data = await response.json();
    return {
      title: data.title,
      description: data.description,
      coverUrl: data.cover,
      audioUrl: data.mediaUrl || data.audio,
      duration: data.duration,
    };
  } catch (error) {
    console.error('API fetch error:', error);
    return null;
  }
}
```

### 预期效果

- 直接调用小宇宙官方 API 获取音频链接
- 成功率大幅提升
- 无需用户手动操作
- 完全自动化

请确认这个方案，我将立即实施代码修改。